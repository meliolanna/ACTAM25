<div id="settingsModal" class="modal modal--hidden">
  <div class="modal-content">
    <h2 class="modal-title">SETTINGS ⚙️</h2>

    <p style="margin-bottom:10px;">Input sound:</p>

    <div style="text-align:left; display:inline-block;">
      <label style="display:block; margin:8px 0;">
        <input type="radio" name="inputSound" value="osc">
        Synth
      </label>

      <label style="display:block; margin:8px 0;">
        <input type="radio" name="inputSound" value="clap">
        Clap
      </label>

      <label style="display:block; margin:8px 0;">
        <input type="radio" name="inputSound" value="dog">
        Dog
      </label>

      <label style="display:block; margin:8px 0;">
        <input type="radio" name="inputSound" value="cat">
        Cat
      </label>
    </div>

    <div style="margin-top:14px; font-size:0.9rem;">
      <button id="previewSoundBtn" class="start-btn">PREVIEW</button>
    </div>

    <div class="modal-button-row">
      <button id="closeSettingsBtn" class="start-btn start-btn--back">CLOSE</button>
    </div>
  </div>
</div>

<script type="module" src="main.js"></script>

    <script type="module">
        import { AudioManager } from './GameSounds.js';

        window.addEventListener('load', () => {
            
            const audio = new AudioManager();
            audio.init(); 

           
            const unlockAudio = () => {
                if (!audio.ctx) audio.init();
                else if (audio.ctx.state === 'suspended') audio.ctx.resume();
            };

            // 1. GESTIONE DEI PULSANTI UI STANDARD (Start, Save, Restart)
            
            document.querySelectorAll('.closeSettingsBtn').forEach(btn => {
                
                if(btn.closest('.sound-link')) return;

                btn.addEventListener('click', () => {
                    unlockAudio();
                    audio.playTouchUI();
                });
            });

            // 2. GESTIONE LINK DI NAVIGAZIONE (Back to Menu)
            const navLinks = document.querySelectorAll('.sound-link');

            navLinks.forEach(link => {
                link.addEventListener('click', (event) => {
                    
                    event.preventDefault();

                   
                    unlockAudio();
                    audio.playTouchUI();

                    // C. Recupera destinazione
                    const targetUrl = link.getAttribute('href');

                    // D. Aspetta 300ms e vai
                    setTimeout(() => {
                        window.location.href = targetUrl;
                    }, 300);
                });
            });
        });
    </script>
  </body>
</html>
